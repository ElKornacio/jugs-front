(this["webpackJsonpjugs-front"]=this["webpackJsonpjugs-front"]||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){},149:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){"use strict";a.r(t);var n,i=a(0),s=a.n(i),c=a(8),o=a.n(c),r=a(9),l=a.n(r),u=a(54),h=a(7),j=(a(125),a(55)),d=a(56),b=a(57),p=a(63),f=a(58),x=a.n(f),m=(n=function(){function e(t,a,n){Object(j.a)(this,e),this.isStopped=!0,this.canvas=void 0,this.size=void 0,this.ctx=void 0,this.executionState=void 0,this.bucketPath=new Path2D("M213.14 250.752L246.332 0H0L33.1916 250.752C33.9384 256.396 36.3446 261.537 39.9771 265.249C43.6096 268.96 48.2302 271 53.0076 271H193.324C198.102 271 202.722 268.96 206.355 265.249C209.987 261.537 212.394 256.396 213.14 250.752ZM11.4109 10L43.1051 249.44C43.5972 253.159 45.1507 256.238 47.124 258.254C49.0567 260.229 51.1685 261 53.008 261H193.324C195.164 261 197.275 260.229 199.208 258.254C201.181 256.238 202.735 253.159 203.227 249.44L234.921 10H11.4109Z"),this.waterPath=new Path2D("M5 4L36.7994 247.35C37.515 252.828 39.8201 257.816 43.3003 261.418C46.7805 265.021 51.2072 267 55.7842 267H190.216C194.793 267 199.22 265.021 202.7 261.418C206.18 257.816 208.485 252.828 209.201 247.35L241 4H5Z"),this.canvas=t,this.size=a,this.ctx=x()(t.getContext("2d")),this.executionState=n}return Object(d.a)(e,[{key:"setExecutionState",value:function(e){this.executionState=e}},{key:"setSize",value:function(e){this.size=e}},{key:"start",value:function(){this.isStopped=!1,this.loop()}},{key:"stop",value:function(){this.isStopped=!0}},{key:"loop",value:function(){this.render(),this.isStopped||requestAnimationFrame(this.loop)}},{key:"drawBucket",value:function(e,t,a,n){var i=this.ctx;a=.3+.7*a,i.save(),i.translate(e-123.5*a,t-270*a),i.scale(a,a),i.fillStyle="#16D0DC",i.fill(this.waterPath,"evenodd"),i.clearRect(0,0,247,270*(1-(.05+.915*n))),i.restore(),i.save(),i.translate(e-123.5*a,t-270*a),i.scale(a,a),i.fillStyle="black",i.fill(this.bucketPath,"evenodd"),i.restore()}},{key:"render",value:function(){var e=this.ctx;e.clearRect(0,0,this.size.width,this.size.height),e.save(),e.translate(0,0),e.fillStyle="#f0f0f0",e.fillRect(0,0,this.size.width,this.size.height);var t=Math.max(this.executionState.params.X,this.executionState.params.Y),a=this.executionState.params.X/t,n=this.executionState.params.Y/t,i=this.executionState.state.x/this.executionState.params.X,s=this.executionState.state.y/this.executionState.params.Y;this.drawBucket(this.size.width*(3/9),this.size.height*(3/4),a,i),this.drawBucket(this.size.width*(6/9),this.size.height*(3/4),n,s),e.font="50px sans-serif",e.textBaseline="top",e.textAlign="center",e.save(),e.fillStyle=this.executionState.state.x===this.executionState.params.Z?"green":"black",this.executionState.state.x===this.executionState.params.Z&&(e.shadowColor="lime",e.shadowBlur=30),e.fillText(String(this.executionState.state.x),this.size.width*(3/9),this.size.height*(3/4)+50),e.restore(),e.save(),e.fillStyle=this.executionState.state.y===this.executionState.params.Z?"green":"black",this.executionState.state.y===this.executionState.params.Z&&(e.shadowColor="lime",e.shadowBlur=30),e.fillText(String(this.executionState.state.y),this.size.width*(6/9),this.size.height*(3/4)+50),e.restore(),e.restore()}}]),e}(),Object(b.a)(n.prototype,"loop",[p.a],Object.getOwnPropertyDescriptor(n.prototype,"loop"),n.prototype),n),O=(a(126),a(1));function v(e){return{width:e.clientWidth,height:e.clientHeight}}var S=function(e){var t=e.executionState,a=Object(i.useRef)(null),n=function(e){var t=Object(i.useState)({width:800,height:600}),a=Object(h.a)(t,2),n=a[0],s=a[1];return Object(i.useEffect)((function(){s(v(e.current));var t=function(){s(v(e.current))};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),n}(a),s=Object(i.useState)(null),c=Object(h.a)(s,2),o=c[0],r=c[1];return Object(i.useEffect)((function(){var e=new m(a.current,n,t);return e.start(),r(e),function(){return e.stop()}}),[]),Object(i.useEffect)((function(){o&&(o.setExecutionState(t),o.setSize(n))}),[o,t,n]),Object(O.jsx)("div",{className:"visualization",children:Object(O.jsx)("canvas",{ref:a,className:"vis-canvas",width:n.width,height:n.height})})},g=a(16),y=a(65),N=a(179),w=a(10),C=a(59),k=a(64),P=a(19),z=a.n(P),E=a(66);var X=function(e,t,a){var n=Object(i.useState)("pause"),s=Object(h.a)(n,2),c=s[0],o=s[1],r=Object(i.useState)(0),l=Object(h.a)(r,2),u=l[0],j=l[1];return Object(i.useEffect)((function(){e.onStateChange(Object(E.a)({params:e.params,type:"state"},a[u-1]?a[u-1]:{action:"fX",state:{x:0,y:0}}))}),[u,e.params,a]),Object(i.useEffect)((function(){var a=null;return"play"===c&&(a=u>=e.actionsLength?setTimeout((function(){o("pause")}),1e3):setTimeout((function(){j(u+1)}),t)),function(){a&&clearTimeout(a)}}),[u,c]),{replay:function(){j(0),o("play")},play:function(){u>=e.actionsLength&&j(0),o("play")},pause:function(){o("pause")},stop:function(){o("pause"),j(0)},playState:c,playPosition:u,setPlayPosition:j}},Y=a(2),L=a.n(Y);function R(e){var t,a=e.step,n=e.index===e.actionsLength,i=function(t){return a?{final:n&&(t?a.state.x:a.state.y)===e.params.Z}:void 0};return Object(O.jsxs)("div",{style:e.style,className:L()("el-row",{active:e.playPosition===e.index}),onClick:function(){return e.setPlayPosition(e.index)},children:[Object(O.jsx)("div",{className:"el-name",children:a?(t=a.action,{fX:"Fill X",fY:"Fill Y",eX:"Empty X",eY:"Empty Y",X2Y:"Transfer X to Y",Y2X:"Transfer Y to X"}[t]):"Start"}),Object(O.jsx)("div",{className:L()("el-x el-state",i(!0)),children:a?a.state.x:0}),Object(O.jsx)("div",{className:L()("el-y el-state",i(!1)),children:a?a.state.y:0})]},e.index)}a(149);var B=function(e){var t=Object(i.useRef)(null),a=e.stepDuration,n=e.params,s=e.actionsLength,c=e.actionsIterator,o=e.onStepDurationChange,r=Object(i.useState)([]),l=Object(h.a)(r,2),u=l[0],j=l[1],d=X(e,a,u),b=d.replay,p=d.play,f=d.pause,x=d.stop,m=d.playState,v=d.playPosition,S=d.setPlayPosition;return Object(i.useEffect)((function(){return u.length?b():x()}),[u]),Object(i.useEffect)((function(){var e=new z.a(n);j(Object(y.a)(e.executionIterator(c)))}),[n,s,c]),Object(i.useEffect)((function(){t.current&&t.current.scrollToItem(v,"center")}),[v]),u.length?Object(O.jsxs)("div",{className:"actions-log",children:[Object(O.jsx)("div",{className:"log-block",children:Object(O.jsxs)(N.b,{children:[Object(O.jsx)(N.a,{icon:"play",disabled:"play"===m,intent:w.a.PRIMARY,onClick:p,children:"Play"}),Object(O.jsx)(N.a,{icon:"pause",disabled:"pause"===m,intent:w.a.WARNING,onClick:f,children:"Pause"}),Object(O.jsx)(N.a,{icon:"stop",disabled:"pause"===m&&(0===v||v===s),intent:w.a.DANGER,onClick:x,children:"Stop"})]})}),Object(O.jsxs)("div",{className:"log-block step-duration-block",children:[Object(O.jsx)("div",{style:{textAlign:"center",marginBottom:10},children:"Action duration:"}),Object(O.jsx)(N.d,{max:5e3,min:20,labelValues:[20,1e3,2e3,3e3,4e3,5e3],value:a,onChange:o})]}),Object(O.jsxs)("div",{className:"log-block",children:["Actions count: ",s]}),Object(O.jsxs)("div",{className:"execution-log",children:[Object(O.jsxs)("div",{className:"el-head",children:[Object(O.jsx)("div",{className:"el-name",children:"Name"}),Object(O.jsx)("div",{className:"el-x el-state",children:"X"}),Object(O.jsx)("div",{className:"el-y el-state",children:"Y"})]}),Object(O.jsx)("div",{className:"el-body",children:Object(O.jsx)(C.a,{children:function(e){var a=e.width,i=e.height;return Object(O.jsx)(k.a,{ref:t,width:a,height:i,itemSize:30,itemCount:s+1,children:function(e){e.data;var t=e.index,a=e.style;return Object(O.jsx)(R,{style:a,index:t,step:t?u[t-1]:null,actionsLength:s,params:n,playPosition:v,setPlayPosition:S})}})}})})]})]}):Object(O.jsx)("div",{className:"actions-log no-solution",children:"No solution for this params"})},Z=a(29),A=a.n(Z),D=(a(175),N.e.create({position:"bottom"}));function I(e){var t=e.onUpdate,a=Object(i.useState)("2"),n=Object(h.a)(a,2),s=n[0],c=n[1],o=Object(i.useState)("10"),r=Object(h.a)(o,2),l=r[0],u=r[1],j=Object(i.useState)("4"),d=Object(h.a)(j,2),b=d[0],p=d[1],f=Object(i.useCallback)((function(){isNaN(Number(s))||isNaN(Number(l))||isNaN(Number(b))||Number(s)<1||Number(l)<1||Number(b)<1?D.show({intent:w.a.DANGER,message:"Invalid input"}):(console.log(s,l,b),t({X:Number(s),Y:Number(l),Z:Number(b)}))}),[s,l,b]);return Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)(N.a,{intent:w.a.NONE,className:"generate-btn",onClick:function(){var e=A()(20,5e3),a=A()(20,5e3),n=A()(1,Math.min(e,a));c(String(e)),u(String(a)),p(String(n)),t({X:e,Y:a,Z:n})},icon:"random",children:"Random"}),Object(O.jsx)(N.c,{clampValueOnBlur:!0,min:1,className:"param-input",placeholder:"X",value:s,onValueChange:function(e,t){return c(t)}}),Object(O.jsx)(N.c,{clampValueOnBlur:!0,min:1,className:"param-input",placeholder:"Y",value:l,onValueChange:function(e,t){return u(t)}}),Object(O.jsx)(N.c,{clampValueOnBlur:!0,min:1,className:"param-input",placeholder:"Z",value:b,onValueChange:function(e,t){return p(t)}}),Object(O.jsx)(N.a,{intent:w.a.PRIMARY,className:"solve-btn",onClick:f,icon:"cog",children:"Solve"})]})}var M=function(){var e=Object(i.useState)("fast"),t=Object(h.a)(e,2),a=t[0],n=(t[1],Object(i.useState)({X:2,Y:10,Z:4})),s=Object(h.a)(n,2),c=s[0],o=s[1],r=Object(i.useState)(null),j=Object(h.a)(r,2),d=j[0],b=j[1],p=Object(i.useState)(0),f=Object(h.a)(p,2),x=f[0],m=f[1],v=Object(i.useState)(600),y=Object(h.a)(v,2),N=y[0],w=y[1],C=Object(i.useState)({params:c,type:"state",action:"fX",state:{x:0,y:0}}),k=Object(h.a)(C,2),P=k[0],z=k[1];return Object(i.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,n,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.solversMap[a],n=new t,e.next=4,n.getBestSolutionFromServer(c);case 4:i=e.sent,m(n.getSolutionLength(i)),b(n.iterateActions(i));case 7:case"end":return e.stop()}}),e)})))()}),[c]),Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)(I,{onUpdate:o}),Object(O.jsx)("div",{className:"app-body",children:d?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(S,{executionState:P}),Object(O.jsx)(B,{actionsLength:x,actionsIterator:d,params:c,onStateChange:z,stepDuration:N,onStepDurationChange:w})]}):Object(O.jsx)("div",{children:'Press "Solve" to get a solution'})})]})};o.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(M,{})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.bc3b4ad6.chunk.js.map