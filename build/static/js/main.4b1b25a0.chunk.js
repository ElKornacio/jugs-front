(this["webpackJsonpjugs-front"]=this["webpackJsonpjugs-front"]||[]).push([[0],{126:function(t,e,a){},128:function(t,e,a){},130:function(t,e,a){},152:function(t,e,a){},178:function(t,e,a){"use strict";a.r(e);var n,s=a(0),i=a.n(s),c=a(8),o=a.n(c),r=(a(126),a(9)),l=a.n(r),u=a(54),h=a(7),j=a(181),d=a(10),b=(a(128),a(55)),p=a(56),f=a(57),x=a(63),O=a(58),v=a.n(O),m=(n=function(){function t(e,a,n){Object(b.a)(this,t),this.isStopped=!0,this.canvas=void 0,this.size=void 0,this.ctx=void 0,this.executionState=void 0,this.bucketPath=new Path2D("M213.14 250.752L246.332 0H0L33.1916 250.752C33.9384 256.396 36.3446 261.537 39.9771 265.249C43.6096 268.96 48.2302 271 53.0076 271H193.324C198.102 271 202.722 268.96 206.355 265.249C209.987 261.537 212.394 256.396 213.14 250.752ZM11.4109 10L43.1051 249.44C43.5972 253.159 45.1507 256.238 47.124 258.254C49.0567 260.229 51.1685 261 53.008 261H193.324C195.164 261 197.275 260.229 199.208 258.254C201.181 256.238 202.735 253.159 203.227 249.44L234.921 10H11.4109Z"),this.waterPath=new Path2D("M5 4L36.7994 247.35C37.515 252.828 39.8201 257.816 43.3003 261.418C46.7805 265.021 51.2072 267 55.7842 267H190.216C194.793 267 199.22 265.021 202.7 261.418C206.18 257.816 208.485 252.828 209.201 247.35L241 4H5Z"),this.canvas=e,this.size=a,this.ctx=v()(e.getContext("2d")),this.executionState=n}return Object(p.a)(t,[{key:"setExecutionState",value:function(t){this.executionState=t}},{key:"setSize",value:function(t){this.size=t}},{key:"start",value:function(){this.isStopped=!1,this.loop()}},{key:"stop",value:function(){this.isStopped=!0}},{key:"loop",value:function(){this.render(),this.isStopped||requestAnimationFrame(this.loop)}},{key:"drawBucket",value:function(t,e,a,n){var s=this.ctx;a=.3+.7*a,s.save(),s.translate(t-123.5*a,e-270*a),s.scale(a,a),s.fillStyle="#16D0DC",s.fill(this.waterPath,"evenodd"),s.clearRect(0,0,247,270*(1-(.05+.915*n))),s.restore(),s.save(),s.translate(t-123.5*a,e-270*a),s.scale(a,a),s.fillStyle="black",s.fill(this.bucketPath,"evenodd"),s.restore()}},{key:"render",value:function(){var t=this.ctx;t.clearRect(0,0,this.size.width,this.size.height),t.save(),t.translate(0,0),t.fillStyle="#f0f0f0",t.fillRect(0,0,this.size.width,this.size.height);var e=Math.max(this.executionState.params.X,this.executionState.params.Y),a=this.executionState.params.X/e,n=this.executionState.params.Y/e,s=this.executionState.state.x/this.executionState.params.X,i=this.executionState.state.y/this.executionState.params.Y;this.drawBucket(this.size.width*(3/9),this.size.height*(3/4),a,s),this.drawBucket(this.size.width*(6/9),this.size.height*(3/4),n,i),t.font="50px sans-serif",t.textBaseline="top",t.textAlign="center",t.save(),t.fillStyle=this.executionState.state.x===this.executionState.params.Z?"green":"black",this.executionState.state.x===this.executionState.params.Z&&(t.shadowColor="lime",t.shadowBlur=30),t.fillText(String(this.executionState.state.x),this.size.width*(3/9),this.size.height*(3/4)+50),t.restore(),t.save(),t.fillStyle=this.executionState.state.y===this.executionState.params.Z?"green":"black",this.executionState.state.y===this.executionState.params.Z&&(t.shadowColor="lime",t.shadowBlur=30),t.fillText(String(this.executionState.state.y),this.size.width*(6/9),this.size.height*(3/4)+50),t.restore(),t.restore()}}]),t}(),Object(f.a)(n.prototype,"loop",[x.a],Object.getOwnPropertyDescriptor(n.prototype,"loop"),n.prototype),n),S=a(1);function y(t){return{width:t.clientWidth,height:t.clientHeight}}var g=function(t){var e=t.executionState,a=Object(s.useRef)(null),n=function(t){var e=Object(s.useState)({width:800,height:600}),a=Object(h.a)(e,2),n=a[0],i=a[1];return Object(s.useEffect)((function(){i(y(t.current));var e=function(){i(y(t.current))};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}(a),i=Object(s.useState)(null),c=Object(h.a)(i,2),o=c[0],r=c[1];return Object(s.useEffect)((function(){var t=new m(a.current,n,e);return t.start(),r(t),function(){return t.stop()}}),[]),Object(s.useEffect)((function(){o&&(o.setExecutionState(e),o.setSize(n))}),[o,e,n]),Object(S.jsx)("div",{className:"visualization",children:Object(S.jsx)("canvas",{ref:a,className:"vis-canvas",width:n.width,height:n.height})})},w=(a(130),a(16)),N=a(65),C=a(59),k=a(64),P=a(19),z=a.n(P),E=a(66);var X=function(t,e,a){var n=Object(s.useState)("pause"),i=Object(h.a)(n,2),c=i[0],o=i[1],r=Object(s.useState)(0),l=Object(h.a)(r,2),u=l[0],j=l[1];return Object(s.useEffect)((function(){t.onStateChange(Object(E.a)({params:t.params,type:"state"},a[u-1]?a[u-1]:{action:"fX",state:{x:0,y:0}}))}),[u,t.params,a]),Object(s.useEffect)((function(){var a=null;return"play"===c&&(a=u>=t.actionsLength?setTimeout((function(){o("pause")}),1e3):setTimeout((function(){j(u+1)}),e)),function(){a&&clearTimeout(a)}}),[u,c]),{replay:function(){j(0),o("play")},play:function(){u>=t.actionsLength&&j(0),o("play")},pause:function(){o("pause")},stop:function(){o("pause"),j(0)},playState:c,playPosition:u,setPlayPosition:j}},Y=a(3),L=a.n(Y);function R(t){var e,a=t.step,n=t.index===t.actionsLength,s=function(e){return a?{final:n&&(e?a.state.x:a.state.y)===t.params.Z}:void 0};return Object(S.jsxs)("div",{style:t.style,className:L()("el-row",{active:t.playPosition===t.index}),onClick:function(){return t.setPlayPosition(t.index)},children:[Object(S.jsx)("div",{className:"el-name",children:a?(e=a.action,{fX:"Fill X",fY:"Fill Y",eX:"Empty X",eY:"Empty Y",X2Y:"Transfer X to Y",Y2X:"Transfer Y to X"}[e]):"Start"}),Object(S.jsx)("div",{className:L()("el-x el-state",s(!0)),children:a?a.state.x:0}),Object(S.jsx)("div",{className:L()("el-y el-state",s(!1)),children:a?a.state.y:0})]},t.index)}a(152);var Z=function(t){var e=Object(s.useRef)(null),a=t.stepDuration,n=t.params,i=t.actionsLength,c=t.actionsIterator,o=t.onStepDurationChange,r=Object(s.useState)([]),l=Object(h.a)(r,2),u=l[0],b=l[1],p=X(t,a,u),f=p.replay,x=p.play,O=p.pause,v=p.stop,m=p.playState,y=p.playPosition,g=p.setPlayPosition;return Object(s.useEffect)((function(){return u.length?f():v()}),[u]),Object(s.useEffect)((function(){var t=new z.a(n);b(Object(N.a)(t.executionIterator(c)))}),[n,i,c]),Object(s.useEffect)((function(){e.current&&e.current.scrollToItem(y,"center")}),[y]),u.length?Object(S.jsxs)("div",{className:"actions-log",children:[Object(S.jsx)("div",{className:"log-block",children:Object(S.jsxs)(j.b,{children:[Object(S.jsx)(j.a,{icon:"play",disabled:"play"===m,intent:d.a.PRIMARY,onClick:x,children:"Play"}),Object(S.jsx)(j.a,{icon:"pause",disabled:"pause"===m,intent:d.a.WARNING,onClick:O,children:"Pause"}),Object(S.jsx)(j.a,{icon:"stop",disabled:"pause"===m&&(0===y||y===i),intent:d.a.DANGER,onClick:v,children:"Stop"})]})}),Object(S.jsxs)("div",{className:"log-block step-duration-block",children:[Object(S.jsx)("div",{style:{textAlign:"center",marginBottom:10},children:"Action duration:"}),Object(S.jsx)(j.d,{max:5e3,min:20,labelValues:[20,1e3,2e3,3e3,4e3,5e3],value:a,onChange:o})]}),Object(S.jsxs)("div",{className:"log-block",children:["Actions count: ",i]}),Object(S.jsxs)("div",{className:"execution-log",children:[Object(S.jsxs)("div",{className:"el-head",children:[Object(S.jsx)("div",{className:"el-name",children:"Name"}),Object(S.jsx)("div",{className:"el-x el-state",children:"X"}),Object(S.jsx)("div",{className:"el-y el-state",children:"Y"})]}),Object(S.jsx)("div",{className:"el-body",children:Object(S.jsx)(C.a,{children:function(t){var a=t.width,s=t.height;return Object(S.jsx)(k.a,{ref:e,width:a,height:s,itemSize:30,itemCount:i+1,children:function(t){t.data;var e=t.index,a=t.style;return Object(S.jsx)(R,{style:a,index:e,step:e?u[e-1]:null,actionsLength:i,params:n,playPosition:y,setPlayPosition:g})}})}})})]})]}):Object(S.jsx)("div",{className:"actions-log no-solution",children:"No solution for this params"})},A=a(29),D=a.n(A);function B(t){var e=t.onUpdate,a=Object(s.useState)(2),n=Object(h.a)(a,2),i=n[0],c=n[1],o=Object(s.useState)(10),r=Object(h.a)(o,2),l=r[0],u=r[1],b=Object(s.useState)(4),p=Object(h.a)(b,2),f=p[0],x=p[1];return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsx)(j.a,{intent:d.a.NONE,className:"generate-btn",onClick:function(){var t=D()(20,5e3),a=D()(20,5e3),n=D()(1,Math.min(t,a));c(t),u(a),x(n),e({X:t,Y:a,Z:n})},icon:"random",children:"Random"}),Object(S.jsx)(j.c,{className:"param-input",placeholder:"X",value:i,onValueChange:function(t){return c(t)}}),Object(S.jsx)(j.c,{className:"param-input",placeholder:"Y",value:l,onValueChange:function(t){return u(t)}}),Object(S.jsx)(j.c,{className:"param-input",placeholder:"Z",value:f,onValueChange:function(t){return x(t)}}),Object(S.jsx)(j.a,{intent:d.a.PRIMARY,className:"solve-btn",onClick:function(){return e({X:i,Y:l,Z:f})},icon:"cog",children:"Solve"})]})}var M=function(){var t=Object(s.useState)("fast"),e=Object(h.a)(t,2),a=e[0],n=(e[1],Object(s.useState)({X:2,Y:10,Z:4})),i=Object(h.a)(n,2),c=i[0],o=i[1],r=Object(s.useState)(null),j=Object(h.a)(r,2),d=j[0],b=j[1],p=Object(s.useState)(0),f=Object(h.a)(p,2),x=f[0],O=f[1],v=Object(s.useState)(50),m=Object(h.a)(v,2),y=m[0],N=m[1],C=Object(s.useState)({params:c,type:"state",action:"fX",state:{x:0,y:0}}),k=Object(h.a)(C,2),P=k[0],z=k[1];return Object(s.useEffect)((function(){Object(u.a)(l.a.mark((function t(){var e,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=w.solversMap[a],n=new e,t.next=4,n.getBestSolutionFromServer(c);case 4:s=t.sent,O(n.getSolutionLength(s)),b(n.iterateActions(s));case 7:case"end":return t.stop()}}),t)})))()}),[c]),Object(S.jsxs)("div",{className:"app",children:[Object(S.jsx)(B,{onUpdate:o}),Object(S.jsx)("div",{className:"app-body",children:d?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(g,{executionState:P}),Object(S.jsx)(Z,{actionsLength:x,actionsIterator:d,params:c,onStateChange:z,stepDuration:y,onStepDurationChange:N})]}):Object(S.jsx)("div",{children:'Press "Solve" to get a solution'})})]})};o.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(M,{})}),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.4b1b25a0.chunk.js.map